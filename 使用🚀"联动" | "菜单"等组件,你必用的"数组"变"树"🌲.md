# ä½¿ç”¨ğŸš€"è”åŠ¨"/"èœå•"ç­‰ç»„ä»¶,ä½ å¿…ç”¨çš„"æ•°ç»„"å˜"æ ‘"ğŸŒ²

æ–°åå°åšèœå•, ğŸ‘¦åç«¯è¯´:"**è¿™æ¬¡èœå•å±‚çº§ä¸å›ºå®š, ä¸”ç›´æ¥ç»™æŠŠæ•°æ®åº“ä¸­çš„è¡¨æ•°æ®(æ•°ç»„)å‘ç»™ä½ **".
 
å…¶å®å¹³æ—¶å¾ˆå°‘å†™æ•°æ®å¤„ç†, ä¸è¿‡è§‰å¾—è‡ªå·±å·®ä¸å¤šèƒ½å®ç°å°±ç­”åº”äº†. å†™å®Œäº†è§‰å¾—è¿˜æŒºå¥½ç”¨å°±åˆ†äº«ä¸€ä¸‹, ğŸ¦èœé¸Ÿä¸€æš, ğŸ‘¨è·¯è¿‡çš„å¤§ä½¬å¦‚æœå‘ç°ä»€ä¹ˆé—®é¢˜è¯·å‘ŠçŸ¥, ğŸ˜œæˆ‘å¿…è™šå¿ƒæ¥å—.

**æ³¨**: é¥¿äº†ä¹ˆ/iviewç­‰ç»„ä»¶åº“ä¸­çš„"**çº§è”é€‰æ‹©å™¨**"/"**å¯¼èˆªèœå•**"ç­‰ç»„ä»¶éƒ½å¯ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°ç®€åŒ–æ“ä½œ.

## ç›®æ ‡
```javascript
const array = [{
        id: 1,
        name: 'è”¬èœ',
        order: 1
    },
    {
        id: 2,
        name: 'åœŸè±†',
        pid: 1,
        order: 2
    }, {
        id: 3,
        name: 'è±†è§’',
        pid: 1,
        order: 1
    }, {
        id: 4,
        name: 'æ°´æœ',
        order: 2
    }
];

arrayToTree(array);
// è¾“å‡º:
// 
// [
//     {
//         "id": 1,
//         "name": "è”¬èœ",
//         "order": 1,
//         "children": [
//             {
//                 "id": 3,
//                 "name": "è±†è§’",
//                 "pid": 1,
//                 "order": 1
//             },
//             {
//                 "id": 2,
//                 "name": "åœŸè±†",
//                 "pid": 1,
//                 "order": 2
//             }
//         ]
//     },
//     {
//         "id": 4,
//         "name": "æ°´æœ",
//         "order": 2
//     }
// ]

```

## æ€è·¯
é€»è¾‘å¾ˆç®€å•, æˆ‘ä¸€æ­¥ä¸€æ­¥è§£é‡Šä¸‹:
1. æŠŠ"æ ¹èŠ‚ç‚¹"å’Œå…¶ä½™"å­èŠ‚ç‚¹"åˆ†åˆ«å­˜å‚¨åˆ°2ä¸ªå˜é‡(å®¹å™¨).
2. ä»æ ¹(çˆ¶)å‡ºå‘, åœ¨"å­èŠ‚ç‚¹"å®¹å™¨ä¸­æ£€æŸ¥æ¯ä¸€ä¸ªå­èŠ‚ç‚¹, æ‰¾åˆ°è¯¥çˆ¶èŠ‚ç‚¹å¯¹åº”çš„å­èŠ‚ç‚¹, å¹¶å­˜å‚¨åˆ°çˆ¶èŠ‚ç‚¹å¯¹åº”çš„childrenå­—æ®µä¸­, ä¸ç¬¦åˆçš„"å­èŠ‚ç‚¹"ç»§ç»­ç•™åˆ°"å­èŠ‚ç‚¹å®¹å™¨"ä¸­.
3. å¯¹childrenå­—æ®µä¸­çš„"èŠ‚ç‚¹"è¿›è¡Œæ’åº(æ­¤å¤„æ’åºæš‚æ—¶ç”¨çš„sort).
4. é€’å½’æ‰§è¡Œ"æ­¥éª¤2å’Œ3"ç›´åˆ°"å­èŠ‚ç‚¹å®¹å™¨"ä¸ºç©º.
5. å¯¹å…¶ä»–"æ ¹èŠ‚ç‚¹"é‡å¤æ‰§è¡Œ"æ­¥éª¤2/3/4".

## ä»£ç 
```javascript
/**
 * æ•°ç»„è½¬æ ‘
 * @param {Array} è¾“å…¥
 * @param {Object.String} keyMap.KEY_ID è¡¨ç¤ºå”¯ä¸€æ€§é”®å€¼(id)
 * @param {Object.String} keyMap.KEY_PID å¯¹åº”çš„çˆ¶id
 * @param {Object.String} keyMap.KEY_ORDER æ’åºä¾æ®çš„é”®å€¼
 * @returns {Object} æ ‘ç»“æ„
 */
function arrayToTree(list, keyMap = {
    KEY_ID: 'id',
    KEY_PID: 'pid',
    KEY_ORDER: 'order',
}) {
    const {
        KEY_ID,
        KEY_PID,
        KEY_ORDER
    } = keyMap;
    const roots = [];
    // å½“å‰éæ ¹èŠ‚ç‚¹
    let childrenNode = [];

    // åˆ†ç»„æ ¹å’Œéæ ¹èŠ‚ç‚¹
    list.forEach((item) => {
        if (undefined === item[KEY_PID]) {
            roots.push(item);
        } else {
            childrenNode.push(item);
        }
    });

    // éå†æ ¹èŠ‚ç‚¹
    for (const root of roots) {
        findChild(root);
    }

    // é€’å½’å•ä¸ªæ ¹èŠ‚ç‚¹
    function findChild(root) {
        if (0 >= childrenNode.length) return;
        let newChildNode = [];
        childrenNode.forEach((child) => {
            if (root[KEY_ID] === child[KEY_PID]) {
                if (undefined === root.children) root.children = [];
                root.children.push(child);
                findChild(child /**new root */ );
            } else {
                newChildNode.push(child);
            }
        });

        // æ’åº
        if (undefined !== KEY_ORDER && root.children && 1 < root.children.length) {
            root.children = root.children.sort((prev, current) => prev[KEY_ORDER] - current[KEY_ORDER]);
        }
        childrenNode = newChildNode;
    }
    return roots;
}
```

## npm & github
æœ¬æ–‡ä»£ç , æˆ‘å·²ç»å­˜å‚¨åˆ°githubå’Œnpm, å¯ä»¥é€šè¿‡npmè¿›è¡Œå®‰è£…ä½¿ç”¨.
```shell
npm i -S arr2tree
```
https://github.com/any86/arr2tree

## typescriptåŸºç¡€æ•™ç¨‹æ¨è
æœ€åæ¨ä¸‹è‡ªå·±å†™çš„"**typescriptåŸºç¡€æ•™ç¨‹**"å’ŒğŸ˜ŠğŸ˜Š2ä¸ªåŸºäºtså¼€å‘çš„**å°å·¥å…·**, å¸Œæœ›å¤§å®¶å–œæ¬¢.

[ç¬¬ä¸€è¯¾, ä½“éªŒtypescript](https://juejin.im/post/5d19ad6de51d451063431864)

[ç¬¬äºŒè¯¾, åŸºç¡€ç±»å‹å’Œå…¥é—¨é«˜çº§ç±»å‹](https://juejin.im/post/5d1af3426fb9a07ed4411a9b)

[ç¬¬ä¸‰è¯¾, ä»€ä¹ˆæ˜¯æ³›å‹?](https://juejin.im/post/5d27f160e51d45108223fcf9)

[ç¬¬å››è¯¾, è§£è¯»é«˜çº§ç±»å‹](https://juejin.im/post/5d3fe80fe51d456206115987)

[ç¬¬äº”è¯¾, å‘½åç©ºé—´(namespace)æ˜¯ä»€ä¹ˆ?](https://juejin.im/post/5d5d04dfe51d4561af16dd24)


**âœ‹ ç§»åŠ¨/pcç«¯æ‰‹åŠ¿åº“, æ”¯æŒ: tap/press/pan/swipe/rotate/pinch**
https://github.com/any86/any-touch

**ğŸ­ æŠŠvueç»„ä»¶å˜æˆthis.$xxxè¿™æ ·çš„å‘½ä»¤**
https://github.com/any86/vue-create-root

## å¾®ä¿¡ç¾¤
æ„Ÿè°¢å¤§å®¶çš„é˜…è¯», å¦‚æœ‰ç–‘é—®å¯ä»¥åŠ æˆ‘å¾®ä¿¡, æˆ‘æ‹‰ä½ è¿›å…¥**å¾®ä¿¡ç¾¤**(ç”±äºè…¾è®¯å¯¹å¾®ä¿¡ç¾¤çš„100äººé™åˆ¶, è¶…è¿‡100äººåå¿…é¡»ç”±ç¾¤æˆå‘˜æ‹‰å…¥)

![](https://user-gold-cdn.xitu.io/2019/9/19/16d474d245b69492?w=512&h=512&f=jpeg&s=27137)